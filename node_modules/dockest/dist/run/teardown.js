"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const leaveBridgeNetwork_1 = require("../utils/network/leaveBridgeNetwork");
const Logger_1 = require("../Logger");
const removeBridgeNetwork_1 = require("../utils/network/removeBridgeNetwork");
const teardownSingle_1 = require("../utils/teardownSingle");
exports.teardown = async ({ hostname, runMode, mutables: { runners, dockerEventEmitter }, perfStart, }) => {
    for (const runner of Object.values(runners)) {
        await teardownSingle_1.teardownSingle({ runner });
    }
    if (runMode === 'docker-injected-host-socket') {
        await leaveBridgeNetwork_1.leaveBridgeNetwork({ containerId: hostname });
        await removeBridgeNetwork_1.removeBridgeNetwork();
    }
    dockerEventEmitter.destroy();
    Logger_1.Logger.measurePerformance(perfStart);
};
//# sourceMappingURL=teardown.js.map