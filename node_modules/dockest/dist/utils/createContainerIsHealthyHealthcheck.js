"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const operators_1 = require("rxjs/operators");
exports.createContainerIsHealthyHealthcheck = ({ dockerEventStream$ }) => dockerEventStream$
    .pipe(operators_1.tap(ev => {
    if (ev.action === 'die' || ev.action === 'kill') {
        throw new Error('Container unexpectedly died.');
    }
}), operators_1.takeWhile(ev => ev.action === 'health_status' && ev.attributes.healthStatus === 'healthy'), operators_1.mapTo(undefined), 
// complete stream (promise) after first successful health_status event was emitted.
operators_1.take(1))
    .toPromise();
//# sourceMappingURL=createContainerIsHealthyHealthcheck.js.map